---
layout: post
title: Git学习心得和Git教程整理
tags: Git
categories: Git
published: true
---

#总结

---

## 工作区和暂存区 ##

`工作区`就是你在电脑里能看到git本地库所在的workspace目录

`版本库`工作区有一个隐藏目录`.git`，这个不算工作区，而是Git的版本库

`暂存区`Git的版本库里存了很多东西，其中最重要的就是称为stage（或者叫index）的暂存区

![title](/static/img/Git学习心得和Git教程整理/工作区暂存区版本库.jpg "title")

暂存操作：

![title](/static/img/Git学习心得和Git教程整理/暂存.jpg "title")

提交操作:

![title](/static/img/Git学习心得和Git教程整理/提交.jpg "title")

##Git常用命令

---

###初始化一个Git仓库

####`git init`命令把这个目录变成Git可以管理的仓库

```bash
	$ git init
	Initialized empty Git repository in /Users/michael/learngit/.git/
```

###添加文件到Git仓库

####`git add`告诉Git，把文件添加到暂存区

```bash
	$ git add readme.txt
```

####`git commit`告诉Git，把文件提交到仓库

```bash
	$ git commit -m "wrote a readme file"
	[master (root-commit) cb926e7] wrote a readme file
	 1 file changed, 2 insertions(+)
	 create mode 100644 readme.txt
```

### 查看文件状态 ###

#### `git status`命令查看仓库当前的状态 ####

```bash
	$ git status
	# On branch master
	# Changes not staged for commit:
	#   (use "git add <file>..." to update what will be committed)
	#   (use "git checkout -- <file>..." to discard changes in working directory)
	#
	#    modified:   readme.txt
	#
	no changes added to commit (use "git add" and/or "git commit -a")
```

#### `git diff`对比文件变更 ####

```bash
	$ git diff readme.txt 
	diff --git a/readme.txt b/readme.txt
	index 46d49bf..9247db6 100644
	--- a/readme.txt
	+++ b/readme.txt
	@@ -1,2 +1,2 @@
	-Git is a version control system.
	+Git is a distributed version control system.
	 Git is free software.
```

### 撤销修改 ###

#### `checkout -- file`可以丢弃工作区的修改 ####

**`git checkout -- file`命令中的`--`很重要，没有`--`，就变成了“切换到另一个分支”的命令,测试不加也可以成功执行放弃更改操作，但是工作区中没有与分支名相同的文件（用github for windows 的powershell测试）**

```bash
	$ git checkout -- readme.txt
```

### 版本回退 ###

#### `git log`可以查看提交历史 ####

```bash
	$ git log
	commit 3628164fb26d48395383f8f31179f24e0882e1e0
	Author: Michael Liao <askxuefeng@gmail.com>
	Date:   Tue Aug 20 15:11:49 2013 +0800
	
	    append GPL
	
	commit ea34578d5496d7dd233c827ed32a8cd576c5ee85
	Author: Michael Liao <askxuefeng@gmail.com>
	Date:   Tue Aug 20 14:53:12 2013 +0800
	
	    add distributed
	
	commit cb926e7ea50ad11b8f9e909c05226233bf755030
	Author: Michael Liao <askxuefeng@gmail.com>
	Date:   Mon Aug 19 17:51:55 2013 +0800
	
	    wrote a readme file
```

```bash
	$ git log --pretty=oneline
	3628164fb26d48395383f8f31179f24e0882e1e0 append GPL
	ea34578d5496d7dd233c827ed32a8cd576c5ee85 add distributed
	cb926e7ea50ad11b8f9e909c05226233bf755030 wrote a readme file
```

#### `git reset`在版本的历史之间切换 ####

```bash
	$ git reset --hard HEAD^
	HEAD is now at ea34578 add distributed
```

```bash
	$ git reset --hard 3628164
	HEAD is now at 3628164 append GPL
```

**`HEAD`表示当前版本,上一个版本就是`HEAD^`，上上一个版本就是`HEAD^^`，当然往上100个版本写100个`^`比较容易数不过来，所以写成`HEAD~100`**

回退前：![title](/static/img/Git学习心得和Git教程整理/HEAD1.jpg "title")		回退后：![title](/static/img/Git学习心得和Git教程整理/HEAD2.jpg "title")

#### `git reflog`查看命令历史 ####

```bash
	$ git reflog
	ea34578 HEAD@{0}: reset: moving to HEAD^
	3628164 HEAD@{1}: commit: append GPL
	ea34578 HEAD@{2}: commit: add distributed
	cb926e7 HEAD@{3}: commit (initial): wrote a readme file
```

> 场景1：当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令`git checkout --file`。

> 场景2：当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令`git reset HEAD file`，就回到了场景1，第二步按场景1操作。

> 场景3：已经提交了不合适的修改到版本库时，想要撤销本次提交，参考版本回退,使用命令`git reset HEAD commit_id`回退版本，不过前提是没有推送到远程库。

---

##  ##

---

#教程

##这个博客的git教程还是不错的,上个面的总结来自这里

[http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000](http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000 "这里是廖雪峰的官方网站的Git教程")

##Pro Git教程

Pro Git中文github地址

[https://github.com/progit/progit/tree/master/zh](https://github.com/progit/progit/tree/master/zh "Pro Git教程中文版")

Pro Git 2中文github地址

[https://github.com/progit/progit/tree/master/zh](https://github.com/progit/progit/tree/master/zh "Pro Git 2中文github地址")

或者去我的网盘下载pdf教程 **提取密码:wn45**

[http://pan.baidu.com/s/1pJVoaAR](http://pan.baidu.com/s/1pJVoaAR "Pro Git中文pdf下载")