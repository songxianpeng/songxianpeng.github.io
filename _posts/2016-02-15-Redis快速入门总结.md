---
layout: post
title: Redis快速入门总结
tags: 缓存 Redis
categories: 缓存
published: true
---

`Redis`是一个开源，先进的key-value存储，并用于构建高性能，可扩展的Web应用程序的完美解决方案。

**Redis从它的许多竞争继承来的三个主要特点：**

* Redis数据库完全在内存中，使用磁盘仅用于持久性。

* 相比许多键值数据存储，Redis拥有一套较为丰富的数据类型。

* Redis可以将数据复制到任意数量的从服务器。

**Redis 优势**
* *异常快速*：Redis的速度非常快，每秒能执行约11万集合，每秒约81000+条记录。

* *支持丰富的数据类型*：Redis支持最大多数开发人员已经知道像列表，集合，有序集合，散列数据类型。这使得它非常容易解决各种各样的问题，因为我们知道哪些问题是可以处理通过它的数据类型更好。

* *操作都是原子性*：所有Redis操作是原子的，这保证了如果两个客户端同时访问的Redis服务器将获得更新后的值。

* *多功能实用工具*：Redis是一个多实用的工具，可以在多个用例如缓存，消息，队列使用(Redis原生支持发布/订阅)，任何短暂的数据，应用程序，如Web应用程序会话，网页命中计数等。

---

## 常用命令 ##

### 启动 ###

```shell
$redis-server
```

### 检查Redis是否在工作 ###

```bash
$redis-cli
redis 127.0.0.1:6379>
```
现在输入PING命令检查连接

```shell
redis 127.0.0.1:6379> ping
PONG
```
**在远程服务器上执行命令**

```shell
$redis-cli -h 127.0.0.1 -p 6379 -a "mypass"
redis 127.0.0.1:6379>
redis 127.0.0.1:6379> PING

PONG
```

### 键操作 ###

命令|作用|示例
:---|:---|:---
DEL key| 此命令删除键，如果存在
DUMP key | 该命令返回存储在指定键的值的序列化版本。
EXISTS key | 此命令检查该键是否存在。
EXPIRE key seconds| 指定键的过期时间
EXPIREAT key timestamp | 指定的键过期时间。在这里，时间是在Unix时间戳格式
PEXPIRE key milliseconds | 设置键以毫秒为单位到期
PEXPIREAT key milliseconds-timestamp | 设置键在Unix时间戳指定为毫秒到期
KEYS pattern | 查找与指定模式匹配的所有键|redis 127.0.0.1:6379> KEYS tutorial* <br/> 1) "tutorial3" <br/> 2) "tutorial1" <br/> 3) "tutorial2"
MOVE key db | 移动键到另一个数据库
PERSIST key | 移除过期的键
PTTL key | 以毫秒为单位获取剩余时间的到期键。
TTL key | 获取键到期的剩余时间。
RANDOMKEY | 从Redis返回随机键|redis 127.0.0.1:6379> SET tutorial1 redis<br/>OK<br/>redis 127.0.0.1:6379> SET tutorial2 mysql<br/>OK<br/>redis 127.0.0.1:6379> SET tutorial3 mongodb<br/>OK<br/>redis 127.0.0.1:6379> RANDOMKEY<br/>1) tutorial3
RENAME key newkey | 更改键的名称
RENAMENX key newkey | 重命名键，如果新的键不存在
TYPE key | 返回存储在键的数据类型的值。

---

## 数据类型 ##

Redis支持5种类型的数据类型

### 字符串 ###

Redis字符串是字节序列。Redis字符串是二进制安全的，这意味着他们有一个已知的长度没有任何特殊字符终止，所以你可以存储任何东西，512兆为上限。

```shell
redis 127.0.0.1:6379> SET name "yiibai"
OK
redis 127.0.0.1:6379> GET name
"yiibai"
```

命令|作用|示例
:---|:---|:---
SET key value  | 此命令用于在指定键设置值
GET key  | 键对应的值。
GETRANGE key start end  | 得到字符串的子字符串存放在一个键|redis 127.0.0.1:6379> SET mykey "This is my test key"<br/>OK<br/>redis 127.0.0.1:6379> GETRANGE mykey 0 3<br/>"This"<br/>redis 127.0.0.1:6379> GETRANGE mykey 0 -1<br/>"This is my test key"
GETSET key value | 设置键的字符串值，并返回旧值
GETBIT key offset | 返回存储在键位值的字符串值的偏移
MGET key1 [key2..] | 得到所有的给定键的值|redis 127.0.0.1:6379> SET key1 "hello"<br/>OK<br/>redis 127.0.0.1:6379> SET key2 "world"<br/>OK<br/>redis 127.0.0.1:6379> MGET key1 key2 someOtherKey<br/>1) "Hello"<br/>2) "World"<br/>3) (nil)
SETBIT key offset value | 设置或清除该位在存储在键的字符串值偏移
SETEX key seconds value | 键到期时设置值
SETNX key value | 设置键的值，只有当该键不存在
SETRANGE key offset value | 覆盖字符串的一部分从指定键的偏移
STRLEN key | 得到存储在键的值的长度
MSET key value [key value ...] | 设置多个键和多个值
MSETNX key value [key value ...]  | 设置多个键多个值，只有在当没有按键的存在时
PSETEX key milliseconds value | 设置键的毫秒值和到期时间
INCR key | 增加键的整数值一次
INCRBY key increment | 由给定的数量递增键的整数值
INCRBYFLOAT key increment | 由给定的数量递增键的浮点值
DECR key | 递减键一次的整数值
DECRBY key decrement | 由给定数目递减键的整数值
APPEND key value | 追加值到一个键

### 哈希 ###

Redis的哈希是键值对的集合。 Redis的哈希值是字符串字段和字符串值之间的映射，因此它们被用来表示对象。

```shell
redis 127.0.0.1:6379> HMSET user:1 username yiibai password yiibai points 200
OK
redis 127.0.0.1:6379> HGETALL user:1

1) "username"
2) "yiibai"
3) "password"
4) "yiibai"
5) "points"
6) "200"
```

命令|作用|示例
:---|:---|:---
HDEL key field2 [field2]  | 删除一个或多个哈希字段
HEXISTS key field  | 判断一个哈希字段存在与否
HGET key field  | 获取存储在指定的键散列字段的值
HGETALL key  | 让所有的字段和值在指定的键存储在一个哈希
HINCRBY key field increment  | 由给定数量增加的哈希字段的整数值
HINCRBYFLOAT key field increment  | 由给定的递增量哈希字段的浮点值
HKEYS key  | 获取所有在哈希字段
HLEN key  | 获取哈希字段数
HMGET key field1 [field2]  | 获得所有给定的哈希字段的值
HMSET key field1 value1 [field2 value2 ]  | 设置多个哈希字段的多个值
HSET key field value  | 设置哈希字段的字符串值
HSETNX key field value  | 设置哈希字段的值，仅当该字段不存在
HVALS key  | 获取在哈希中的所有值
HSCAN key cursor [MATCH pattern] [COUNT count]  | 增量迭代哈希字段及相关值

### 列表 ###

Redis的列表是简单的字符串列表，排序插入顺序。您可以添加元素到Redis的列表的头部或尾部。

```shell
redis 127.0.0.1:6379> lpush tutoriallist redis
(integer) 1
redis 127.0.0.1:6379> lpush tutoriallist mongodb
(integer) 2
redis 127.0.0.1:6379> lpush tutoriallist rabitmq
(integer) 3
redis 127.0.0.1:6379> lrange tutoriallist 0 10

1) "rabitmq"
2) "mongodb"
3) "redis"
```

列表的最大长度为 232 - 1 元素（4294967295，每个列表中可容纳超过4十亿的元素）。

### 集合 ###

Redis的集合是字符串的无序集合。在Redis您可以添加，删除和测试文件是否存在，在成员O（1）的时间复杂度。

```shell
redis 127.0.0.1:6379> sadd tutoriallist redis
(integer) 1
redis 127.0.0.1:6379> sadd tutoriallist mongodb
(integer) 1
redis 127.0.0.1:6379> sadd tutoriallist rabitmq
(integer) 1
redis 127.0.0.1:6379> sadd tutoriallist rabitmq
(integer) 0
redis 127.0.0.1:6379> smembers tutoriallist

1) "rabitmq"
2) "mongodb"
3) "redis"

```

*在上面的例子中rabitmq集合添加加两次，但由于集合元素具有唯一属性。*

### 有序集合 ###

Redis的有序集合类似于Redis的集合，字符串不重复的集合。不同的是，一个有序集合的每个成员用分数，以便采取有序set命令，从最小的到最大的成员分数有关。虽然成员具有唯一性，但分数可能会重复。

```shell
redis 127.0.0.1:6379> zadd tutoriallist 0 redis
(integer) 1
redis 127.0.0.1:6379> zadd tutoriallist 0 mongodb
(integer) 1
redis 127.0.0.1:6379> zadd tutoriallist 0 rabitmq
(integer) 1
redis 127.0.0.1:6379> zadd tutoriallist 0 rabitmq
(integer) 0
redis 127.0.0.1:6379> ZRANGEBYSCORE tutoriallist 0 1000

1) "redis"
2) "mongodb"
3) "rabitmq"

```

## 事务 ##

Redis事务让一组命令在单个步骤执行。事务中有两个属性，说明如下：

* 在一个事务中的所有命令按顺序执行作为单个隔离操作。通过另一个客户端发出的请求在Redis的事务的过程中执行，这是不可能的。

* Redis的事务具有原子性。原子意味着要么所有的命令都执行或都不执行。

```shell
redis 127.0.0.1:6379> MULTI
OK
redis 127.0.0.1:6379> SET tutorial redis
QUEUED
redis 127.0.0.1:6379> GET tutorial
QUEUED
redis 127.0.0.1:6379> INCR visitors
QUEUED
redis 127.0.0.1:6379> EXEC

1) OK
2) "redis"
3) (integer) 1
```


![title](/static/img/Maven实战总结/publishFactory.bmp "title")

*以上资源来源于Redis快速入门*
http://www.yiibai.com/redis/redis_quick_guide.html