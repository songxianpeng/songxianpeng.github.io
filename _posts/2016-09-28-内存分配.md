---  
layout: post  
title: 内存分配  
tags: Java基础 内存分配  
categories: Java  
published: true  
---  
## 空间划分

Java 程序在运行时，需要在内存中的分配空间。为了提高运算效率，就对空间进行了不同区域的划分，因为每一片区域都有特定的处理数据方式和内存管理方式

![空间划分](/static/img/内存分配/空间划分.gif "空间划分")

* 栈存 储局部变量
	- 方法定义中或者方法声明上的所有变量
	- `使用完毕，立即消失`
* 堆 存储new出来的实体，对象。
	- 每一个实体都有首地址值
	- 每一个实体内的数据都有默认值
		+ byte,short,int,long：0
		+ float,double：0.0
		+ char：‘\u0000’
		+ boolean：false
		+ 引用类型：null
	- `使用完毕后，会被垃圾回收器空闲的时候回收。`
* 方法区 (面向对象部分讲)
* 本地方法区 (和系统相关)
	- `Java方法是与平台无关的，但是本地方法不是。`
* 寄存器 (给CPU使用)

![Java中的内存分配图解](/static/img/内存分配/Java中的内存分配图解.bmp "Java中的内存分配图解")

## 数组内存图解

> 定义第一个数组,定义完毕后，给数组元素赋值。赋值完毕后，在输出数组名称和元素。  
> 定义第二个数组,定义完毕后，给数组元素赋值。赋值完毕后，在输出数组名称和元素。  
> 定义第三个数组,把第一个数组的地址值赋值给它。(注意类型一致)，通过第三个数组的名称去把元素重复赋值。  
> 最后，再次输出第一个数组数组名称和元素。  

```java
class ArrayDemo4 {
	public static void main(String[] args) {
		//定义第一个数组
		int[] arr = new int[3];
		arr[0] = 88;
		arr[1] = 33;
		arr[2] = 66;
		System.out.println(arr);//0x001
		System.out.println(arr[0]);//88
		System.out.println(arr[1]);//33
		System.out.println(arr[2]);//66
		System.out.println("----");
		
		//定义第二个数组
		int[] arr2 = new int[3];
		arr2[0] = 22;
		arr2[1] = 44;
		arr2[2] = 55;
		System.out.println(arr2);//0x002
		System.out.println(arr2[0]);//22
		System.out.println(arr2[1]);//44
		System.out.println(arr2[2]);//55
		System.out.println("----");
		
		//定义第三个数组
		int[] arr3 =  arr;
		arr3[0] = 100;
		arr3[1] = 200;
		System.out.println(arr);//0x001
		System.out.println(arr[0]);//100
		System.out.println(arr[1]);//200
		System.out.println(arr[2]);//66
	}
}
```

![数组的内存图解](/static/img/内存分配/数组的内存图解.bmp "数组的内存图解")

----------

*以上概念总结于传智播客Java基础课程*